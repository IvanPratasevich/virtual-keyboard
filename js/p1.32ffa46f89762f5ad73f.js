(()=>{"use strict";const e=[[{code:"Backquote",key:{ru:"ё",en:"`"},shift:{ru:"Ё",en:"~"}},{code:"Digit1",key:{ru:"1",en:"1"},shift:{ru:"!",en:"!"}},{code:"Digit2",key:{ru:"2",en:"2"},shift:{ru:'"',en:"@"}},{code:"Digit3",key:{ru:"3",en:"3"},shift:{ru:"№",en:"#"}},{code:"Digit4",key:{ru:"4",en:"4"},shift:{ru:";",en:"$"}},{code:"Digit5",key:{ru:"5",en:"5"},shift:{ru:"%",en:"%"}},{code:"Digit6",key:{ru:"6",en:"6"},shift:{ru:":",en:"^"}},{code:"Digit7",key:{ru:"7",en:"7"},shift:{ru:"?",en:"&"}},{code:"Digit8",key:{ru:"8",en:"8"},shift:{ru:"*",en:"*"}},{code:"Digit9",key:{ru:"9",en:"9"},shift:{ru:"(",en:"("}},{code:"Digit0",key:{ru:"0",en:"0"},shift:{ru:")",en:")"}},{code:"Minus",key:{ru:"-",en:"-"},shift:{ru:"_",en:"_"}},{code:"Equal",key:{ru:"=",en:"="},shift:{ru:"+",en:"+"}},{code:"Backspace",key:{ru:"Backspace",en:"Backspace"},shift:{ru:"none",en:"none"},class:"backspace"}],[{code:"Tab",key:{ru:"Tab",en:"Tab"},shift:{ru:"none",en:"none"},class:"tab"},{code:"KeyQ",key:{ru:"й",en:"q"},shift:{ru:"Й",en:"Q"}},{code:"KeyW",key:{ru:"ц",en:"w"},shift:{ru:"Ц",en:"W"}},{code:"KeyE",key:{ru:"у",en:"e"},shift:{ru:"У",en:"E"}},{code:"KeyR",key:{ru:"к",en:"r"},shift:{ru:"К",en:"R"}},{code:"KeyT",key:{ru:"е",en:"t"},shift:{ru:"Е",en:"T"}},{code:"KeyY",key:{ru:"н",en:"y"},shift:{ru:"Н",en:"Y"}},{code:"KeyU",key:{ru:"г",en:"u"},shift:{ru:"Г",en:"U"}},{code:"KeyI",key:{ru:"ш",en:"i"},shift:{ru:"Ш",en:"I"}},{code:"KeyO",key:{ru:"щ",en:"o"},shift:{ru:"Щ",en:"O"}},{code:"KeyP",key:{ru:"з",en:"p"},shift:{ru:"З",en:"P"}},{code:"BracketLeft",key:{ru:"х",en:"["},shift:{ru:"Х",en:"{"}},{code:"BracketRight",key:{ru:"ъ",en:"]"},shift:{ru:"Ъ",en:"}"}},{code:"Backslash",key:{ru:"\\",en:"\\"},shift:{ru:"/",en:"|"}},{code:"Delete",key:{ru:"Del",en:"Del"},shift:{ru:"none",en:"none"},class:"del"}],[{code:"CapsLock",key:{ru:"CapsLock",en:"CapsLock"},shift:{ru:"none",en:"none"},class:"capslock"},{code:"KeyA",key:{ru:"ф",en:"a"},shift:{ru:"Ф",en:"A"}},{code:"KeyS",key:{ru:"ы",en:"s"},shift:{ru:"Ы",en:"S"}},{code:"KeyD",key:{ru:"в",en:"d"},shift:{ru:"В",en:"D"}},{code:"KeyF",key:{ru:"а",en:"f"},shift:{ru:"А",en:"F"}},{code:"KeyG",key:{ru:"п",en:"g"},shift:{ru:"П",en:"G"}},{code:"KeyH",key:{ru:"р",en:"h"},shift:{ru:"Р",en:"H"}},{code:"KeyJ",key:{ru:"о",en:"j"},shift:{ru:"О",en:"J"}},{code:"KeyK",key:{ru:"л",en:"k"},shift:{ru:"Л",en:"K"}},{code:"KeyL",key:{ru:"д",en:"l"},shift:{ru:"Д",en:"L"}},{code:"Semicolon",key:{ru:"ж",en:";"},shift:{ru:"Ж",en:":"}},{code:"Quote",key:{ru:"э",en:"'"},shift:{ru:"Э",en:'"'}},{code:"Enter",key:{ru:"Enter",en:"Enter"},shift:{ru:"none",en:"none"},class:"enter"}],[{code:"ShiftLeft",key:{ru:"Shift",en:"Shift"},shift:{ru:"none",en:"none"},class:"shift shift-left"},{code:"KeyZ",key:{ru:"я",en:"z"},shift:{ru:"Я",en:"Z"}},{code:"KeyX",key:{ru:"ч",en:"x"},shift:{ru:"Ч",en:"X"}},{code:"KeyC",key:{ru:"с",en:"c"},shift:{ru:"С",en:"C"}},{code:"KeyV",key:{ru:"м",en:"v"},shift:{ru:"М",en:"V"}},{code:"KeyB",key:{ru:"и",en:"b"},shift:{ru:"И",en:"B"}},{code:"KeyN",key:{ru:"т",en:"n"},shift:{ru:"Т",en:"N"}},{code:"KeyM",key:{ru:"ь",en:"m"},shift:{ru:"Ь",en:"M"}},{code:"Comma",key:{ru:"б",en:","},shift:{ru:"Б",en:"<"}},{code:"Period",key:{ru:"ю",en:"."},shift:{ru:"Ю",en:">"}},{code:"Slash",key:{ru:".",en:"/"},shift:{ru:",",en:"?"}},{code:"ArrowUp",key:{ru:"▲",en:"▲"},shift:{ru:"▲",en:"▲"}},{code:"ShiftRight",key:{ru:"Shift",en:"Shift"},shift:{ru:"none",en:"none"},class:"shift shift-right"}],[{code:"ControlLeft",key:{ru:"Ctrl",en:"Ctrl"},shift:{ru:"none",en:"none"},class:"specialKeys"},{code:"MetaLeft",key:{ru:"Win",en:"Win"},shift:{ru:"none",en:"none"},class:"specialKeys"},{code:"AltLeft",key:{ru:"Alt",en:"Alt"},shift:{ru:"none",en:"none"},class:"specialKeys"},{code:"Space",key:{ru:" ",en:" "},shift:{ru:" ",en:" "},class:"space"},{code:"AltRight",key:{ru:"Alt",en:"Alt"},shift:{ru:"none",en:"none"},class:"alt-right"},{code:"ArrowLeft",key:{ru:"◄",en:"◄"},shift:{ru:"◄",en:"◄"}},{code:"ArrowDown",key:{ru:"▼",en:"▼"},shift:{ru:"▼",en:"▼"}},{code:"ArrowRight",key:{ru:"►",en:"►"},shift:{ru:"►",en:"►"}},{code:"ControlRight",key:{ru:"Ctrl",en:"Ctrl"},shift:{ru:"none",en:"none"}}]],t=new class{constructor(){this.lang="en",this.shift=!1,this.capsLock="off",this.isMouseDown=!1,this.capsSwitch=!1,this.keysComb=!1,this.tab="    ",this.textValue="",this.temp="",this.alt=!1}checkLanguage(){localStorage.getItem("lang")?this.lang=localStorage.getItem("lang"):localStorage.setItem("lang",this.lang)}changeLanguage(){"en"===this.lang?this.lang="ru":this.lang="en",this.updateKeyboard(),!0===this.shift&&this.changeKeyboardShift(),localStorage.setItem("lang",this.lang)}updateKeyboard(){const e=document.querySelectorAll(".row");for(let t=0;t<e.length;t+=1){const s=e[t].querySelectorAll(".key");for(let e=0;e<s.length;e+=1)"none"!=`${s[e].getAttribute(`data-lang-${this.lang}`)}`&&(s[e].innerHTML=`${s[e].getAttribute(`data-lang-${this.lang}`)}`)}"on"===this.capsLock&&(this.uppercase(),this.capsLock="on",this.capsSwitch=!0,document.querySelector(".capslock").classList.add("caps-active"))}generateKeyboard(){document.body.innerHTML='\n      <div class="container">\n      <h1 class = \'change-lang\'>Change Language: Left Ctrl + Left Alt </br> Made for Windows</h1>\n      <textarea class="textarea" spellcheck="false"></textarea>\n      <div class="keyboard">\n        <div class="keyboard__container">\n          <div class="row"></div>\n          <div class="row"></div>\n          <div class="row"></div>\n          <div class="row"></div>\n          <div class="row"></div>\n        </div>\n      </div>\n    </div>\n    ',this.checkLanguage();const t=document.querySelectorAll(".row"),{lang:s}=this;for(let a=0;a<t.length;a+=1)for(let n=0;n<e[a].length;n+=1){let c="";c=void 0!==e[a][n].class?`${e[a][n].class}`:"",t[a].innerHTML+=`\n          <div class="key ${c}" data-code = "${e[a][n].code}" data-shift-lang-ru = '${e[a][n].shift.ru}' data-shift-lang-en = '${e[a][n].shift.en}' data-lang-en = "${e[a][n].key.en}" data-lang-ru = '${e[a][n].key.ru}'>\n            ${"en"===s?e[a][n].key.en:e[a][n].key.ru}\n          </div>\n      `}window.addEventListener("keydown",(e=>{e.preventDefault(),this.keyDown(e)})),window.addEventListener("keyup",(e=>{e.preventDefault(),this.keyUp(e)}))}keyUp(e){const t=e.code;document.querySelector(`[data-code = '${e.code}']`).classList.remove("key-active"),"ShiftLeft"!==t&&"ShiftRight"!==t||!0===this.shift&&(this.changeKeyboardBeforeShift(),this.shift=!1),"CapsLock"===t&&(this.capsSwitch=!0),"ControlLeft"===t&&(this.keysComb=!1)}keyDown(e){const t=e.code,s=document.querySelector(`[data-code = '${e.code}']`);switch(s.classList.add("key-active"),e.preventDefault(),t){case"CapsLock":"off"===this.capsLock&&(this.uppercase(),this.capsLock="on",this.capsSwitch=!1,document.querySelector(".capslock").classList.add("caps-active")),this.capsSwitch&&(this.lowercase(),this.capsLock="off",this.capsSwitch=!1,document.querySelector(".capslock").classList.remove("caps-active"));break;case"ControlLeft":this.keysComb=!0;break;case"ControlRight":case"MetaLeft":case"AltRight":break;case"ShiftLeft":case"ShiftRight":this.changeKeyboardShift(),this.shift=!0;break;case"AltLeft":this.alt=!0,this.keysComb&&this.alt&&(this.alt=!1,this.changeLanguage());break;case"Delete":this.deleteKey();break;case"Backspace":this.backspaceKey();break;case"Space":this.writeInTextarea(" ");break;case"Enter":this.writeInTextarea("\n");break;case"Tab":this.tabKey();break;default:this.writeInTextarea(s.innerText)}}tabKey(){const{tab:e}=this,t=document.querySelector(".textarea"),s=t.selectionStart,a=t.selectionEnd,n=t.value.slice(0,s),c=t.value.slice(a);t.value=n+e+c,t.focus(),t.setSelectionRange(s+4,s+4)}deleteKey(){const e=document.querySelector(".textarea"),t=e.selectionStart,s=e.selectionEnd,a=e.value.slice(0,t),n=e.value.slice(s).slice(1);this.textValue="Deleted",e.focus(),t===s?(e.value=a+n,e.setSelectionRange(t,t)):(e.value=a+e.value.slice(s),e.setSelectionRange(t,t))}backspaceKey(){const e=document.querySelector(".textarea"),t=e.selectionStart,s=e.selectionEnd,a=e.value.slice(0,t-1),n=e.value.slice(s);this.textValue="Deleted",e.focus(),t===s&&0!==t&&0!==s?(e.value=a+n,e.setSelectionRange(t-1,t-1)):(e.value=e.value.slice(0,t)+e.value.slice(s),e.setSelectionRange(t,t))}uppercase(){const e=document.querySelectorAll(".row");for(let t=0;t<e.length;t+=1){const s=e[t].querySelectorAll(".key");for(let e=0;e<s.length;e+=1)"none"!=`${s[e].getAttribute(`data-shift-lang-${this.lang}`)}`&&(s[e].innerHTML=`${s[e].getAttribute(`data-lang-${this.lang}`).toUpperCase()}`)}}lowercase(){const e=document.querySelectorAll(".row");for(let t=0;t<e.length;t+=1){const s=e[t].querySelectorAll(".key");for(let e=0;e<s.length;e+=1)"none"!=`${s[e].getAttribute(`data-shift-lang-${this.lang}`)}`&&(s[e].innerHTML=`${s[e].getAttribute(`data-lang-${this.lang}`).toLowerCase()}`)}}changeKeyboard(e){"ShiftLeft"===e.code&&(!1===this.shift?(this.changeKeyboardShift(),this.shift=!0):(this.changeKeyboardBeforeShift(),this.shift="off"))}changeKeyboardShift(){if("on"===this.capsLock){const e=document.querySelectorAll(".row");for(let t=0;t<e.length;t+=1){const s=e[t].querySelectorAll(".key");for(let e=0;e<s.length;e+=1)"none"!=`${s[e].getAttribute(`data-shift-lang-${this.lang}`)}`&&(s[e].innerHTML=`${s[e].getAttribute(`data-shift-lang-${this.lang}`).toLowerCase()}`)}}else{const e=document.querySelectorAll(".row");for(let t=0;t<e.length;t+=1){const s=e[t].querySelectorAll(".key");for(let e=0;e<s.length;e+=1)"none"!=`${s[e].getAttribute(`data-shift-lang-${this.lang}`)}`&&(s[e].innerHTML=`${s[e].getAttribute(`data-shift-lang-${this.lang}`).toUpperCase()}`)}}}changeKeyboardBeforeShift(){if("on"===this.capsLock){this.checkLanguage(),document.querySelector(".keyboard__container").innerHTML='\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        ';const t=document.querySelectorAll(".row"),{lang:s}=this;for(let a=0;a<t.length;a+=1){for(let n=0;n<e[a].length;n+=1){let c="";c=void 0!==e[a][n].class?`${e[a][n].class}`:"","capslock"===e[a][n].class&&("on"===this.capsLock?c="caps-active capslock":"off"===this.capsLock&&(c="capslock")),t[a].innerHTML+=`\n                <div class="key ${c}" data-code = "${e[a][n].code}" data-shift-lang-ru = '${e[a][n].shift.ru}' data-shift-lang-en = '${e[a][n].shift.en}' data-lang-en = "${e[a][n].key.en}" data-lang-ru = "${e[a][n].key.ru}"  data-class =  "${e[a][n].class}">\n                  ${"en"===s?e[a][n].key.en:e[a][n].key.ru}\n                </div>\n            `}this.uppercase()}}else{this.checkLanguage(),document.querySelector(".keyboard__container").innerHTML='\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        <div class="row"></div>\n        ';const t=document.querySelectorAll(".row"),{lang:s}=this;for(let a=0;a<t.length;a+=1)for(let n=0;n<e[a].length;n+=1){let c="";c=void 0!==e[a][n].class?`${e[a][n].class}`:"","capslock"===e[a][n].class&&("on"===this.capsLock?c="caps-active capslock":"off"===this.capsLock&&(c="capslock")),t[a].innerHTML+=`\n                <div class="key ${c}" data-code = "${e[a][n].code}" data-shift-lang-ru = '${e[a][n].shift.ru}' data-shift-lang-en = '${e[a][n].shift.en}' data-lang-en = "${e[a][n].key.en}" data-lang-ru = "${e[a][n].key.ru}"  data-class =  "${e[a][n].class}">\n                  ${"en"===s?e[a][n].key.en:e[a][n].key.ru}\n                </div>\n            `}}}shiftInit(e,t){"ShiftLeft"!==e.target.getAttribute("data-code")&&"ShiftRight"!==e.target.getAttribute("data-code")||("on"===t?(this.isMouseDown=!0,this.shift=!0):(this.isMouseDown=!1,this.shift=!1),this.isMouseDown?("ShiftLeft"===e.target.getAttribute("data-code")?document.querySelector(".shift-left").classList.add("caps-active"):"ShiftRight"===e.target.getAttribute("data-code")&&document.querySelector(".shift-right").classList.add("caps-active"),this.changeKeyboardShift()):("ShiftLeft"===e.target.getAttribute("data-code")?document.querySelector(".shift-left").classList.remove("caps-active"):"ShiftRight"===e.target.getAttribute("data-code")&&document.querySelector(".shift-right").classList.remove("caps-active"),this.changeKeyboardBeforeShift()))}writeInTextarea(e){const t=document.querySelector(".textarea"),s=t.selectionStart,a=t.selectionEnd,n=s+e.length,c=t.value.slice(0,s),i=t.value.slice(a);t.value=c+e+i,this.textValue="Add",t.focus(),t.setSelectionRange(n,n)}removeClick(e){const t=e.target,s=document.querySelector(".textarea");this.temp="Remove Class",s.focus(),t.getAttribute("data-code")&&t.classList.remove("key-active")}clickOnKey(e){const t=e.target;if(document.querySelector(".textarea").focus(),t.getAttribute("data-code")&&t.classList.add("key-active"),!0===t.classList.contains("key"))switch(t.getAttribute("data-code")){case"ShiftLeft":case"ShiftRight":!1===this.shift&&(this.changeKeyboardShift(),this.shift=!0);break;case"CapsLock":"off"===this.capsLock?(this.uppercase(),this.capsLock="on",document.querySelector(".capslock").classList.add("caps-active")):(this.lowercase(),this.capsLock="off",document.querySelector(".capslock").classList.remove("caps-active"),document.querySelector(".capslock").classList.remove("key-active"));break;case"ControlLeft":case"ControlRight":case"AltLeft":case"MetaLeft":case"AltRight":break;case"Delete":this.deleteKey();break;case"Backspace":this.backspaceKey();break;case"Space":this.writeInTextarea(" ");break;case"Enter":this.writeInTextarea("\n");break;case"Tab":this.tabKey();break;default:this.writeInTextarea(t.innerText)}}capsLockClick(e){"CapsLock"===e.target.getAttribute("data-code")&&(this.capsSwitch=!0)}};t.generateKeyboard(),document.body.addEventListener("mousedown",(e=>{t.shiftInit(e,"on"),t.clickOnKey(e)})),document.body.addEventListener("mouseup",(e=>{t.shiftInit(e,"off"),t.removeClick(e)}))})();